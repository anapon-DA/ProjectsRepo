# A/B-тестирование новой рекомендательной системы маркетплейса

[Ссылка на проект](https://nbviewer.org/github/anapon-DA/projects/blob/main/Marketplace%20Recommender%20System%20AB-tests/marketplace-recommender-system-AB-tests.ipynb) :point_left:

В целях принятия решении о внедрении новой рекомендательной системы на маркетплейсе проведено A/B-тестирование. 

**Цель исследования:** оценить корректность проведения A/B-теста и проверить гипотезы о росте конверсии на 10% и более после внедрения новой рекомендательной системы (на 14-й день с момента регистрации).

**Техническое задание**

- Название теста: `recommender_system_test`;
- группы: А — контрольная, B — новая платёжная воронка;
- период проведения тестирования: с 2020-12-07 по 2021-01-04;
- дата остановки набора новых пользователей: 2020-12-21;
- аудитория: 15% новых пользователей из региона EU;
- назначение теста: тестирование изменений, связанных с внедрением улучшенной рекомендательной системы;
- ожидаемое количество участников теста: 6000.
- ожидаемый эффект: за 14 дней с момента регистрации пользователи покажут улучшение каждой метрики не менее, чем на 10%:
	- конверсии в просмотр карточек товаров — событие `product_page`,
	- просмотры корзины — `product_cart`,
	- покупки — `purchase`.

Предоставлены данные:
- таблица учета регистраций пользователей;
- логи событий;
- таблица участников теста;
- календарь маркетинговых событий.


| [Рендер проекта на `nbviewer`](https://nbviewer.org/github/anapon-DA/projects/blob/main/Marketplace%20Recommender%20System%20AB-tests/marketplace-recommender-system-AB-tests.ipynb) | [Проект на `github`](https://github.com/anapon-DA/projects/blob/main/Marketplace%20Recommender%20System%20AB-tests/marketplace-recommender-system-AB-tests.ipynb) |
| --- | --- |
| **корректный переход по внутренним ссылкам в оглавлении проекта, отображаются интерактивные графические объекты Plotly** | статичный вариант |

# Выводы

Доля участников теста от всех пользователей из EU составила 13.15%, тогда как согласно ТЗ ожидалось 15% - доли статистически значимо различваются. Участники распределены по группам неравномерно: численность группы A составляет 57.4% от общего числа, численность группы B - 42.6%, доли статистически значимо различаются. Таким образом, A/B-тестирование было проведено некорректно. Вовремя выявить и помочь избежать ошибок распределения пользователей по группам могло A/A-тестирование, но оно не было проведено.

Количество участников теста - 5568 (ожидалось 6000) - результат фильтрации данных (согласно принципу GIGO, были отфильтрованы некорректные данные). Время проведения теста частично совпадает с маркетинговой активностью региона EU - Christmas&New Year Promo (фактическое пересечение - 5 дней).

С тестом были связаны технические ошибки - часть пользователей из группы B либо не могла осуществить вход, либо их действия не фиксировались в логах. Тогда как в группе A нет данных о действиях 28.7% зарегистрировавшихся пользователей, в группе B данных о действиях нет для 67.5% зарегистрировавшихся пользователей. Пользователи, которые зарегистрировались, но не совершили действие входа `login`, не могли воспользоваться рекомендательной системой.

Распределение количества регистраций по дням показало, что регистрации в группе B, в отличие от группы A, резко упали с 8 декабря. Большая часть пользователей группы A зарегистрировалась, начиная с 14 декабря, в группе B такой тенденции не наблюдалось.

Таким образом, корректность проведения теста неудовлетворительна.

Распределение событий по дням в группах A и B неодинаково: скачок количества событий для группы A был 14 декабря, а в группе B больше всего событий зарегистрировано в период с 7 декабря по 10 декабря - это связано с тем, что пики регистраций пользователей в группах были в разные даты. С 24 на 25 декабря, вместе с началом маркетингового события Christmas&New Year Promo, в группе A произошло резкое падение количества действий `product_cart`, а в группе B - количества действий как `product_cart`, так и `purchase`. Начиная с 26 декабря, темп снижения количества действий в обеих группах замедлился.

Ожидаемый от новой рекомендательной системы эффект повышения конверсии не наступил, вместо этого конверсия *зарегистрировавшихся* пользователей в просмотр карточек товара, просмотры корзины и покупки статистически значимо упала более чем на 10% по сравнению с показателями контрольной группы. Показатели конверсии *авторизировавшихся* пользователей в группе B на всех этапах воронки продаж `login` → `product_page` → `product_cart` → `purchase` также ниже, чем показатели конверсии группы A (на 2-9%).

Интересно, что конверсия в покупку выше, чем в просмотры корзины. Вероятно, часть пользователей совершили покупку по упрощенной форме ("Купить в один клик"), либо это технические ошибки.

**Рекомендации**

- пересмотреть систему распределения пользователей по группам A/B-теста - в данном тестировании распределение участников по группам было неравномерно и в количестве пользователей, и в датах регистраций, также рекомендуется применять A/A-тестирование: контрольная выборка покажет, равномерно ли распределились участники по группам, и если показатели групп A и A не отличаются, внешние факторы не повлияли на результат и данным можно доверять;


- требуется в кратчайшие сроки решить выявленные в процессе анализа проблемы регистрации и авторизации, которые возникли в результате тестов новой рекомендательной системы;


- не вводить новую рекомендательную систему - она не повышает конверсию ни на одном из этапов воронки продаж, и с ней связаны ошибки авторизации, а также, вероятно, ошибки регистрации;


- в дальнейшем не проводить A/B-тесты для аудитории региона в период маркетинговых событий региона - маркетинговые события искажают пользовательские метрики;


- определить причину превышения количества покупок над количеством просмотров корзины, выяснить, не является ли это технической ошибкой (двойные клики кнопки "Оплатить" внутри корзины); 


- если превышение количества покупок над количеством просмотров корзины связано с использованием упрощенной формой покупки "Купить в один клик", требуется ввести для действия "Купить в один клик" отдельное значение (например, `one_click_page`) для записи в логи.

# Статус проекта

:white_check_mark: Завершен

# Инструменты

`Matplotlib`
`Pandas`
`Plotly`
`Python`
`SciPy`
`Seaborn`
